function e(e,t,a,o){Object.defineProperty(e,t,{get:a,set:o,enumerable:!0,configurable:!0})}var t=globalThis,a={},o={},l=t.parcelRequire0a92;null==l&&((l=function(e){if(e in a)return a[e].exports;if(e in o){var t=o[e];delete o[e];var l={id:e,exports:{}};return a[e]=l,t.call(l.exports,l,l.exports),l.exports}var n=Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){o[e]=t},t.parcelRequire0a92=l),(0,l.register)("5N5Ye",function(t,a){function o(){return!!localStorage.getItem("receipt")}function l(e,t="Play Again",a=!1){if(localStorage.getItem("receipt")||a){let a=document.createElement("button");a.classList.add("form-button","play-button"),a.textContent=t,a.onclick=function(){let e=localStorage.getItem("receipt")??!1,t=localStorage.getItem("lastImageId")??!1;return localStorage.clear(),e&&localStorage.setItem("receipt",e),t&&localStorage.setItem("lastImageId",t),window.location.href="/",!1},document.getElementById(e).appendChild(a)}}function n(e,t="Play Again",a=!1){let o=document.createElement("button");o.classList.add("form-button","play-button"),o.textContent=t,o.onclick=function(){window.location.href="gallery.html"},document.getElementById(e).appendChild(o)}function r(){if(localStorage.getItem("receipt")){let e=document.createElement("a");e.href="gallery.html",e.textContent="Gallery",document.querySelector("footer#ai-footer span.footer-row").append(e)}}e(t.exports,"checkPlayAgain",()=>o),e(t.exports,"addPlayAgainButton",()=>l),e(t.exports,"addViewGalleryButton",()=>n),e(t.exports,"addGalleryLinkToFooter",()=>r)});var n=l("5N5Ye");const r="https://il7bkysao3dscz7bylpledumk40tbmof.lambda-url.us-east-1.on.aws/gallery";let c=new URLSearchParams(window.location.search).get("id");const i=localStorage.getItem("key")??!1,s=localStorage.getItem("receipt")??!1;let m=localStorage.getItem("images")?JSON.parse(localStorage.getItem("images")):[],d={},g=0;async function u(){let e=r+"?imageId="+c;s&&(!m.length||0===Object.keys(d).length)&&(e+="&receipt="+s),await fetch(e,{method:"GET",headers:{Host:"il7bkysao3dscz7bylpledumk40tbmof.lambda-url.us-east-1.on.aws"}}).then(e=>{if(!e.ok)throw Error("Server error: "+e.statusText);return e.json()}).then(e=>{Object.keys(d).length>0&&d[c]?(h(c),p(m)):e.imageList&&(m=e.imageList,localStorage.setItem("images",JSON.stringify(e.imageList)),h(c),p(m)),d[c]={imageUrl:e.imageUrl,slogan:e.message},function(e="",t=""){let a=document.getElementById("slogan");if(a.textContent="",document.getElementById("results-placeholder").classList.remove("placeholder"),t){let a=document.getElementById("aiImage");a.src=t,a.alt=e}if(e&&(a.textContent=e.replace(/^"|"$/g,"")),!i||s){let e=document.createElement("button");e.classList.add("form-button","play-button"),e.textContent=s?"Play Again!":"Play Now!",e.onclick=function(){let e=localStorage.getItem("lastImageId")??!1;return localStorage.clear(),s&&localStorage.setItem("receipt",s),e&&localStorage.setItem("lastImageId",e),window.location.href="/",!1},document.getElementById("results").appendChild(e)}}(e.message,e.imageUrl)}).catch(e=>{console.error("Error: ",e),window.location.href="/"})}async function f(e){let t=document.getElementById("slogan"),a=document.getElementById("aiImage");if(a.classList.add("fade-out"),d[m[e]])t.textContent=d[m[e]].slogan,a.src=d[m[e]].imageUrl;else{let o=r+"?imageId="+m[e];await fetch(o,{method:"GET",headers:{Host:"il7bkysao3dscz7bylpledumk40tbmof.lambda-url.us-east-1.on.aws"}}).then(e=>{if(!e.ok)throw Error("Server error: "+e.statusText);return e.json()}).then(o=>{a.src=o.imageUrl,o.message?(t.textContent=o.message.replace(/^"|"$/g,""),a.alt=o.message):(a.alt="AI Image",t.textContent="",o.message=""),d[m[e]]={imageUrl:o.imageUrl,slogan:o.message},a.classList.remove("fade-out")}).catch(e=>{console.error("Error: ",e),window.location.href="/"})}}function h(e){for(let t=0;t<m.length;t++)m[t]===e&&(g=t)}function p(e){let t=document.getElementById("thumbnail-slider-container"),a=document.createElement("button");a.classList.add("gallery-arrow","gallery-arrow-left"),a.innerHTML="&#10094;",a.onclick=function(){(function(){let e=document.querySelector("#thumbnail-slider-container .thumbnail-slider");e&&e.scrollBy({left:-200,behavior:"smooth"})})()};let o=document.createElement("button");o.classList.add("gallery-arrow","gallery-arrow-right"),o.innerHTML="&#10095;",o.onclick=function(){(function(){let e=document.querySelector("#thumbnail-slider-container .thumbnail-slider");e&&e.scrollBy({left:200,behavior:"smooth"})})()};let l=document.createElement("div");l.classList.add("thumbnail-slider");for(let t=0;t<e.length;t++){let a=document.createElement("img");a.src="https://aivote.s3.us-east-1.amazonaws.com/"+e[t]+".png",a.index=t,a.onclick=async function(){await f(this.index),document.querySelectorAll(".thumbnail").forEach(e=>e.classList.remove("active")),this.classList.add("active")},g===t?a.classList.add("thumbnail","active"):a.classList.add("thumbnail"),l.append(a)}t.append(a),t.append(l),t.append(o)}document.addEventListener("DOMContentLoaded",async function(e){c||(localStorage.getItem("lastImageId")?c=localStorage.getItem("lastImageId"):c="03fbfbd26e562b20"),(0,n.addGalleryLinkToFooter)(),await u(c)});
//# sourceMappingURL=gallery.8a691018.js.map
