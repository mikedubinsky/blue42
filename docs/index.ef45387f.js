let e,t;var n=globalThis,o={},r={},i=n.parcelRequire0a92;null==i&&((i=function(e){if(e in o)return o[e].exports;if(e in r){var t=r[e];delete r[e];var n={id:e,exports:{}};return o[e]=n,t.call(n.exports,n,n.exports),n.exports}var i=Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){r[e]=t},n.parcelRequire0a92=i),i.register;var a=i("5N5Ye");const s=document.getElementById("infoForm"),d=document.getElementById("amount"),l=document.getElementById("amountError"),c=document.getElementById("note"),u=document.getElementById("email"),m=document.getElementById("emailError"),y=Stripe("pk_test_51KiTxhG01bbaC0pFEa57cI7TL3BokZ8mcVe0H3o6nf76OrE8Z4TUkPQJ0dc6kUZdjvQNCZfYEijOlxsNWz6Zoi6k001STYeCHf");async function p(n,o,r){let i={amount:Math.floor(100*n)};o&&(i.email=o),r&&(i.comment=r);try{let n=await fetch("https://il7bkysao3dscz7bylpledumk40tbmof.lambda-url.us-east-1.on.aws/support",{method:"POST",headers:{Host:"il7bkysao3dscz7bylpledumk40tbmof.lambda-url.us-east-1.on.aws",Accept:"*/*",Connection:"keep-alive"},body:JSON.stringify(i)}),{paymentIntent:o}=await n.json();(t=(e=y.elements({appearance:{theme:"stripe"},clientSecret:o})).create("payment",{layout:"tabs"})).mount("#payment-element"),document.querySelector("#payment-form").classList.remove("hidden"),document.querySelector("#payment-form #submit").classList.remove("hidden")}catch(e){console.error(e),b("An unexpected error occurred.",!1)}}async function f(t){t.preventDefault(),document.querySelector("#payment-form #submit").disabled=!0;let{error:n,paymentIntent:o}=await y.confirmPayment({elements:e,confirmParams:{return_url:"https://aivotehelper.dubslack.com"},redirect:"if_required"});if(n)b(n.message,!1);else if(o&&"succeeded"===o.status){let e=(o.amount/100).toLocaleString("en-US",{style:"currency",currency:"USD"});localStorage.setItem("receipt",o.id),b(`<h3>Thank you for your support.</h3><p>Amount: ${e}<br>Reference: ${o.id}</p>`,!0),(0,a.addPlayAgainButton)("payment-buttons"),(0,a.addViewGalleryButton)("payment-buttons","View Gallery")}else b("An unexpected error occurred.",!1);S(!1)}function b(e,t){let n=document.querySelector("#payment-message");t?(n.innerHTML=e,n.classList.remove("error"),n.classList.remove("hidden"),document.querySelector("#payment-form").classList.add("hidden"),document.querySelector("#infoForm").classList.add("hidden"),document.querySelector("#stripe-container.inner-container .title").classList.add("hidden")):(n.classList.add("error"),n.innerHTML=e,setTimeout(function(){n.classList.add("hidden"),n.textContent=""},8e3))}function S(e){e?(document.querySelector("#payment-form #submit").disabled=!0,document.querySelector("#spinner").classList.remove("hidden")):(document.querySelector("#submit").disabled=!1,document.querySelector("#spinner").classList.add("hidden"))}s.addEventListener("submit",function(e){e.preventDefault();let n=!1;m.classList.remove("visible"),l.classList.remove("visible");let o=u.value.trim();o&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o)&&(m.classList.add("visible"),n=!0);let r=c.value.trim(),i=/^\d+(\.\d{1,2})?$/.test(d.value),a=parseFloat(d.value).toFixed(2);(!i||a<=1.99)&&(l.classList.add("visible"),n=!0,t&&(t.unmount(),document.querySelector("#payment-form #submit").classList.add("hidden"))),n||(document.getElementById("total-amount").textContent=`$${a}`,document.querySelector("#infoForm input#email").disabled=!0,document.querySelector("#infoForm input#note").disabled=!0,document.querySelector("#infoForm .input-container").style.display="none",document.querySelector("#infoForm .total-container").style.display="flex",S(!0),p(a,o,r).then(e=>S(!1)))}),document.getElementById("edit-amount-button").addEventListener("click",function(){document.querySelector("#infoForm input#email").disabled=!1,document.querySelector("#infoForm input#note").disabled=!1,document.querySelector("#infoForm .input-container").style.display="flex",document.querySelector("#infoForm .total-container").style.display="none",document.getElementById("amount").focus()}),document.querySelector("#payment-form").addEventListener("submit",f);
//# sourceMappingURL=index.ef45387f.js.map
