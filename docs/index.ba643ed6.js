let e,t;var n=globalThis,o={},r={},a=n.parcelRequire0a92;null==a&&((a=function(e){if(e in o)return o[e].exports;if(e in r){var t=r[e];delete r[e];var n={id:e,exports:{}};return o[e]=n,t.call(n.exports,n,n.exports),n.exports}var a=Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){r[e]=t},n.parcelRequire0a92=a),a.register;var s=a("5N5Ye");const c=document.getElementById("infoForm"),i=document.getElementById("amount"),d=document.getElementById("amountError");document.getElementById("note"),document.getElementById("noteError");const l=Stripe("pk_live_51KiTxhG01bbaC0pFwZFznQhwgevhLcws58TcSYAIXJaSOem1MllR1IUd8R5owdrEdyw5U7HmBgYFHwe2mqolJiIC00ufqhmzO3");async function u(n){try{let o=await fetch("https://il7bkysao3dscz7bylpledumk40tbmof.lambda-url.us-east-1.on.aws/support",{method:"POST",headers:{Host:"il7bkysao3dscz7bylpledumk40tbmof.lambda-url.us-east-1.on.aws",Accept:"*/*",Connection:"keep-alive"},body:JSON.stringify({amount:100*n})}),{paymentIntent:r}=await o.json();(t=(e=l.elements({appearance:{theme:"stripe"},clientSecret:r})).create("payment",{layout:"tabs"})).mount("#payment-element"),document.querySelector("#payment-form").classList.remove("hidden"),document.querySelector("#payment-form #submit").classList.remove("hidden")}catch(e){console.error(e),y("An unexpected error occurred.",!1)}}async function m(t){t.preventDefault(),p(!0);let{error:n,paymentIntent:o}=await l.confirmPayment({elements:e,confirmParams:{return_url:"https://aivotehelper.dubslack.com"},redirect:"if_required"});if(n)y(n.message,!1);else if(o&&"succeeded"===o.status){let e=(o.amount/100).toLocaleString("en-US",{style:"currency",currency:"USD"});localStorage.setItem("receipt",o.id),y(`<h3>Thank you for your support.</h3><p>Amount: ${e}<br>Reference: ${o.id}</p>`,!0),(0,s.addPlayAgainButton)("stripe-container")}else y("An unexpected error occurred.",!1);p(!1)}function y(e,t){document.querySelector("#payment-form").classList.add("hidden");let n=document.querySelector("#payment-message");n.classList.remove("error"),n.classList.remove("hidden"),n.innerHTML=e,t?(document.querySelector("#infoForm").classList.add("hidden"),document.querySelector("#stripe-container.inner-container .title").classList.add("hidden")):(n.classList.add("error"),setTimeout(function(){n.classList.add("hidden"),n.textContent=""},8e3))}function p(e){e?(document.querySelector("#payment-form #submit").disabled=!0,document.querySelector("#spinner").classList.remove("hidden")):(document.querySelector("#submit").disabled=!1,document.querySelector("#spinner").classList.add("hidden"))}c.addEventListener("submit",function(e){e.preventDefault();let n=!1;d.classList.remove("visible");let o=/^\d+(\.\d{1,2})?$/.test(i.value),r=parseFloat(i.value).toFixed(2);(!o||r<.99)&&(d.classList.add("visible"),n=!0,t&&(t.unmount(),document.querySelector("#payment-form #submit").classList.add("hidden"))),n||(document.getElementById("total-amount").textContent=`$${r}`,document.querySelector("#infoForm .input-container").style.display="none",document.querySelector("#infoForm .total-container").style.display="flex",p(!0),u(r).then(e=>p(!1)))}),document.getElementById("edit-amount-button").addEventListener("click",function(){document.querySelector("#infoForm .input-container").style.display="flex",document.querySelector("#infoForm .total-container").style.display="none",document.getElementById("amount").focus()}),document.querySelector("#payment-form").addEventListener("submit",m);
//# sourceMappingURL=index.ba643ed6.js.map
